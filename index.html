<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NailStudio - Sistema Completo</title>
    <link rel="stylesheet" href="vicstely.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Tela de Login -->
    <section id="login-section" class="auth-section active-section">
        <div class="auth-container">
            <div class="auth-header">
                <div class="logo-icon">üíÖ</div>
                <h1>NailStudio</h1>
                <p>Fa√ßa login para acessar o sistema</p>
            </div>

            <form class="auth-form" id="login-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" class="form-input" placeholder="seu@email.com" required>
                </div>

                <div class="form-group">
                    <label for="login-password">Senha</label>
                    <input type="password" id="login-password" class="form-input" placeholder="Sua senha" required>
                </div>

                <button type="submit" class="btn-submit">
                    <span>üîë</span> Entrar
                </button>

                <div class="auth-links">
                    <p>N√£o tem conta? <a href="#" onclick="showSection('register-section')">Cadastre-se</a></p>
                </div>
            </form>

            <div class="test-credentials">
                <h4>üß™ Acesso R√°pido:</h4>
                <p><strong>Admin:</strong> admin@nailstudio.com / admin123</p>
                <p><strong>Cliente:</strong> cliente@email.com / senha123</p>
            </div>
        </div>
    </section>

    <!-- Tela de Cadastro -->
    <section id="register-section" class="auth-section">
        <div class="auth-container">
            <div class="auth-header">
                <h1>Criar Conta</h1>
                <p>Cadastre-se como cliente</p>
            </div>

            <form class="auth-form" id="register-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="register-name">Nome Completo</label>
                        <input type="text" id="register-name" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="register-phone">Telefone</label>
                        <input type="tel" id="register-phone" class="form-input" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="register-email">Email</label>
                    <input type="email" id="register-email" class="form-input" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="register-password">Senha</label>
                        <input type="password" id="register-password" class="form-input" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="register-confirm-password">Confirmar Senha</label>
                        <input type="password" id="register-confirm-password" class="form-input" required>
                    </div>
                </div>

                <button type="submit" class="btn-submit">
                    <span>üë§</span> Criar Conta
                </button>

                <div class="auth-links">
                    <p>J√° tem conta? <a href="#" onclick="showSection('login-section')">Fazer login</a></p>
                </div>
            </form>
        </div>
    </section>

    <!-- Sistema Principal (Ap√≥s Login) -->
    <section id="main-system" class="main-system">
        <!-- Header Elegante -->
        <header class="main-header">
            <div class="header-content">
                <div class="logo">
                    <h1>NailStudio</h1>
                    <span id="user-role-display">Cliente</span>
                </div>
                <nav class="main-nav">
                    <a href="#agendamentos" class="nav-link active" data-section="agendamentos-section">Meus
                        Agendamentos</a>
                    <a href="#novo-agendamento" class="nav-link" data-section="novo-agendamento-section">Novo
                        Agendamento</a>
                    <a href="#admin" class="nav-link admin-only" data-section="admin-section"
                        style="display: none;">Administra√ß√£o</a>
                </nav>
                <div class="user-menu">
                    <div class="avatar" id="user-avatar">U</div>
                    <div class="user-info">
                        <span class="user-name" id="user-display-name">Usu√°rio</span>
                        <button class="logout-btn" onclick="logout()">Sair</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Conte√∫do Principal -->
        <main class="main-content">
            <!-- Se√ß√£o de Agendamentos do Cliente -->
            <section id="agendamentos-section" class="content-section active-section">
                <div class="section-header">
                    <h2 class="section-title">Meus Agendamentos</h2>
                    <button class="btn-primary" onclick="showContentSection('novo-agendamento-section')">
                        <span>+</span> Novo Agendamento
                    </button>
                </div>

                <div class="appointments-list" id="user-appointments-list">
                    <!-- Agendamentos ser√£o carregados via JavaScript -->
                </div>
            </section>

            <!-- Se√ß√£o de Novo Agendamento -->
            <section id="novo-agendamento-section" class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Novo Agendamento</h2>
                    <button class="btn-secondary" onclick="showContentSection('agendamentos-section')">
                        ‚Üê Voltar
                    </button>
                </div>

                <form class="booking-form" id="booking-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="servico">Servi√ßo</label>
                            <select id="servico" class="form-input" required>
                                <option value="">Selecione um servi√ßo</option>
                                <option value="manicure-basica" data-price="35">Manicure B√°sica - R$ 35,00</option>
                                <option value="manicure-completa" data-price="45">Manicure Completa - R$ 45,00</option>
                                <option value="pedicure-basica" data-price="40">Pedicure B√°sica - R$ 40,00</option>
                                <option value="pedicure-completa" data-price="55">Pedicure Completa - R$ 55,00</option>
                                <option value="alongamento-gel" data-price="85">Alongamento em Gel - R$ 85,00</option>
                                <option value="spa-maos" data-price="65">Spa das M√£os - R$ 65,00</option>
                                <option value="spa-pes" data-price="75">Spa dos P√©s - R$ 75,00</option>
                                <option value="completo" data-price="120">Combo Completo - R$ 120,00</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="tecnica">T√©cnica</label>
                            <select id="tecnica" class="form-input" required>
                                <option value="">Selecione uma t√©cnica</option>
                                <option value="camila">Camila - Alongamentos</option>
                                <option value="juliana">Juliana - Design Art√≠stico</option>
                                <option value="fernanda">Fernanda - Pedicure</option>
                                <option value="beatriz">Beatriz - Spa</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="data">Data</label>
                            <input type="date" id="data" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="horario">Hor√°rio Dispon√≠vel</label>
                            <select id="horario" class="form-input" required>
                                <option value="">Selecione um hor√°rio</option>
                                <option value="08:00">08:00</option>
                                <option value="09:00">09:00</option>
                                <option value="10:00">10:00</option>
                                <option value="11:00">11:00</option>
                                <option value="14:00">14:00</option>
                                <option value="15:00">15:00</option>
                                <option value="16:00">16:00</option>
                                <option value="17:00">17:00</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="tipo-unha">Tipo de Unha</label>
                        <select id="tipo-unha" class="form-input">
                            <option value="">Natural</option>
                            <option value="gel">Gel</option>
                            <option value="acrigel">Acrigel</option>
                            <option value="fibra">Fibra de Vidro</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="observacoes">Observa√ß√µes (opcional)</label>
                        <textarea id="observacoes" class="form-input textarea" rows="4"
                            placeholder="Alguma prefer√™ncia especial..."></textarea>
                    </div>

                    <div class="form-summary">
                        <div class="summary-item">
                            <span>Servi√ßo:</span>
                            <span id="servico-selecionado">-</span>
                        </div>
                        <div class="summary-item">
                            <span>T√©cnica:</span>
                            <span id="tecnica-selecionada">-</span>
                        </div>
                        <div class="summary-item">
                            <span>Tipo de Unha:</span>
                            <span id="tipo-unha-selecionado">-</span>
                        </div>
                        <div class="summary-item">
                            <span>Data e Hora:</span>
                            <span id="datahora-selecionada">-</span>
                        </div>
                        <div class="summary-item total">
                            <span>Total:</span>
                            <span id="total-selecionado">R$ 0,00</span>
                        </div>
                    </div>

                    <button type="submit" class="btn-submit">
                        <span>üíÖ</span> Confirmar Agendamento
                    </button>
                </form>
            </section>

            <!-- Se√ß√£o de Administra√ß√£o -->
            <section id="admin-section" class="content-section admin-only">
                <div class="section-header">
                    <h2 class="section-title">Painel de Administra√ß√£o</h2>
                    <div class="admin-stats">
                        <div class="stat-card">
                            <h3 id="total-agendamentos">0</h3>
                            <p>Total Agendamentos</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="agendamentos-hoje">0</h3>
                            <p>Agendamentos Hoje</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="agendamentos-pendentes">0</h3>
                            <p>Pendentes</p>
                        </div>
                    </div>
                </div>

                <div class="admin-controls">
                    <input type="text" id="search-appointments" class="form-input" placeholder="Buscar agendamentos...">
                    <select id="filter-status" class="form-input">
                        <option value="">Todos os status</option>
                        <option value="confirmado">Confirmados</option>
                        <option value="pendente">Pendentes</option>
                        <option value="cancelado">Cancelados</option>
                    </select>
                </div>

                <div class="appointments-list" id="admin-appointments-list">
                    <!-- Agendamentos de todos os usu√°rios ser√£o carregados aqui -->
                </div>
            </section>
        </main>
    </section>

    <script>
        // Sistema de Gerenciamento
        class NailStudioSystem {
            constructor() {
                this.users = this.loadFromStorage('users') || [];
                this.appointments = this.loadFromStorage('appointments') || [];
                this.currentUser = this.loadFromStorage('currentUser') || null;

                this.initializeSystem();
            }

            initializeSystem() {
                // Criar usu√°rio admin padr√£o se n√£o existir
                if (!this.users.find(user => user.role === 'admin')) {
                    this.users.push({
                        id: this.generateId(),
                        name: 'Administrador',
                        email: 'admin@nailstudio.com',
                        password: 'admin123',
                        phone: '(11) 99999-9999',
                        role: 'admin',
                        createdAt: new Date().toISOString()
                    });
                    this.saveToStorage('users', this.users);
                }

                // Verificar se h√° usu√°rio logado
                if (this.currentUser) {
                    this.showMainSystem();
                } else {
                    showSection('login-section');
                }

                this.setupEventListeners();
            }

            // üîê SISTEMA DE AUTENTICA√á√ÉO
            login(email, password) {
                const user = this.users.find(u => u.email === email && u.password === password);
                if (user) {
                    this.currentUser = user;
                    this.saveToStorage('currentUser', user);
                    this.showMainSystem();
                    return true;
                }
                return false;
            }

            logout() {
                this.currentUser = null;
                this.saveToStorage('currentUser', null);
                showSection('login-section');
            }

            register(userData) {
                if (this.users.find(u => u.email === userData.email)) {
                    throw new Error('Email j√° cadastrado');
                }

                if (userData.password !== userData.confirmPassword) {
                    throw new Error('Senhas n√£o coincidem');
                }

                const newUser = {
                    id: this.generateId(),
                    ...userData,
                    role: 'client',
                    createdAt: new Date().toISOString()
                };

                this.users.push(newUser);
                this.saveToStorage('users', this.users);
                return newUser;
            }

            // üìÖ SISTEMA DE AGENDAMENTOS
            createAppointment(appointmentData) {
                const appointment = {
                    id: this.generateId(),
                    ...appointmentData,
                    userId: this.currentUser.id,
                    userName: this.currentUser.name,
                    userEmail: this.currentUser.email,
                    status: 'pendente',
                    createdAt: new Date().toISOString()
                };

                this.appointments.push(appointment);
                this.saveToStorage('appointments', this.appointments);
                return appointment;
            }

            cancelAppointment(appointmentId) {
                const appointment = this.appointments.find(a => a.id === appointmentId);
                if (appointment) {
                    appointment.status = 'cancelado';
                    this.saveToStorage('appointments', this.appointments);
                }
            }

            confirmAppointment(appointmentId) {
                const appointment = this.appointments.find(a => a.id === appointmentId);
                if (appointment) {
                    appointment.status = 'confirmado';
                    this.saveToStorage('appointments', this.appointments);
                }
            }

            getUserAppointments() {
                return this.appointments.filter(a => a.userId === this.currentUser.id);
            }

            getAllAppointments() {
                return this.appointments.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            }

            // üéØ INTERFACE DO USU√ÅRIO
            showMainSystem() {
                showSection('main-system');
                this.updateUserInterface();

                if (this.currentUser.role === 'admin') {
                    document.body.classList.add('user-admin');
                    this.loadAdminPanel();
                } else {
                    this.loadUserAppointments();
                }
            }

            updateUserInterface() {
                document.getElementById('user-display-name').textContent = this.currentUser.name;
                document.getElementById('user-avatar').textContent = this.currentUser.name.charAt(0).toUpperCase();
                document.getElementById('user-role-display').textContent = this.currentUser.role === 'admin' ? 'Administrador' : 'Cliente';
            }

            loadUserAppointments() {
                const appointments = this.getUserAppointments();
                const container = document.getElementById('user-appointments-list');

                if (appointments.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <p>Nenhum agendamento encontrado</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = appointments.map(appointment => `
                    <div class="appointment-item">
                        <div class="appointment-info">
                            <div class="appointment-header">
                                <strong>${appointment.serviceName}</strong>
                                <span class="appointment-price">R$ ${appointment.price},00</span>
                            </div>
                            <div class="appointment-details">
                                <div class="detail-item date">${this.formatDate(appointment.date)}</div>
                                <div class="detail-item time">${appointment.time}</div>
                                <div class="detail-item nail-tech">${appointment.technician}</div>
                            </div>
                        </div>
                        <div class="status-container">
                            <span class="status ${appointment.status}">${this.getStatusText(appointment.status)}</span>
                            ${appointment.status === 'pendente' ?
                        `<button class="cancel-btn" onclick="system.cancelAppointment('${appointment.id}'); system.loadUserAppointments()">Cancelar</button>` :
                        ''
                    }
                        </div>
                    </div>
                `).join('');
            }

            loadAdminPanel() {
                const appointments = this.getAllAppointments();
                const container = document.getElementById('admin-appointments-list');

                // Atualizar estat√≠sticas
                const today = new Date().toDateString();
                const todayAppointments = appointments.filter(a => new Date(a.date).toDateString() === today);

                document.getElementById('total-agendamentos').textContent = appointments.length;
                document.getElementById('agendamentos-hoje').textContent = todayAppointments.length;
                document.getElementById('agendamentos-pendentes').textContent = appointments.filter(a => a.status === 'pendente').length;

                if (appointments.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <p>Nenhum agendamento encontrado</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = appointments.map(appointment => `
                    <div class="appointment-item">
                        <div class="appointment-info">
                            <div class="appointment-header">
                                <strong>${appointment.serviceName}</strong>
                                <span class="appointment-price">R$ ${appointment.price},00</span>
                            </div>
                            <div class="appointment-details">
                                <div class="detail-item date">${this.formatDate(appointment.date)}</div>
                                <div class="detail-item time">${appointment.time}</div>
                                <div class="detail-item nail-tech">${appointment.technician}</div>
                            </div>
                            <div class="appointment-client">
                                <strong>Cliente:</strong> ${appointment.userName} (${appointment.userEmail})
                            </div>
                        </div>
                        <div class="status-container">
                            <span class="status ${appointment.status}">${this.getStatusText(appointment.status)}</span>
                            ${appointment.status === 'pendente' ?
                        `<button class="confirm-btn" onclick="system.confirmAppointment('${appointment.id}'); system.loadAdminPanel()">Confirmar</button>` :
                        ''
                    }
                            <button class="cancel-btn" onclick="system.cancelAppointment('${appointment.id}'); system.loadAdminPanel()">Cancelar</button>
                        </div>
                    </div>
                `).join('');
            }

            // üõ†Ô∏è UTILIT√ÅRIOS
            generateId() {
                return Date.now().toString(36) + Math.random().toString(36).substr(2);
            }

            saveToStorage(key, data) {
                localStorage.setItem(key, JSON.stringify(data));
            }

            loadFromStorage(key) {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : null;
            }

            formatDate(dateString) {
                return new Date(dateString).toLocaleDateString('pt-BR');
            }

            getStatusText(status) {
                const statusMap = {
                    'pendente': 'Pendente',
                    'confirmado': 'Confirmado',
                    'cancelado': 'Cancelado'
                };
                return statusMap[status] || status;
            }

            setupEventListeners() {
                // Login
                document.getElementById('login-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const email = document.getElementById('login-email').value;
                    const password = document.getElementById('login-password').value;

                    if (this.login(email, password)) {
                        alert('Login realizado com sucesso!');
                    } else {
                        alert('Email ou senha incorretos!');
                    }
                });

                // Cadastro
                document.getElementById('register-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const formData = {
                        name: document.getElementById('register-name').value,
                        phone: document.getElementById('register-phone').value,
                        email: document.getElementById('register-email').value,
                        password: document.getElementById('register-password').value,
                        confirmPassword: document.getElementById('register-confirm-password').value
                    };

                    try {
                        this.register(formData);
                        alert('Cadastro realizado com sucesso! Fa√ßa login para continuar.');
                        showSection('login-section');
                    } catch (error) {
                        alert(error.message);
                    }
                });

                // Agendamento
                document.getElementById('booking-form').addEventListener('submit', (e) => {
                    e.preventDefault();

                    const serviceSelect = document.getElementById('servico');
                    const selectedOption = serviceSelect.options[serviceSelect.selectedIndex];

                    const appointmentData = {
                        serviceName: selectedOption.text.split(' - ')[0],
                        price: selectedOption.dataset.price,
                        technician: document.getElementById('tecnica').value,
                        date: document.getElementById('data').value,
                        time: document.getElementById('horario').value,
                        type: document.getElementById('tipo-unha').value,
                        observations: document.getElementById('observacoes').value
                    };

                    this.createAppointment(appointmentData);
                    alert('Agendamento realizado com sucesso!');
                    showContentSection('agendamentos-section');
                    this.loadUserAppointments();
                    e.target.reset();
                    updateSummary();
                });

                // Navega√ß√£o
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const sectionId = link.dataset.section;
                        showContentSection(sectionId);
                    });
                });

                // Configurar data m√≠nima
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('data').min = today;

                // Atualizar resumo em tempo real
                document.querySelectorAll('#servico, #tecnica, #data, #horario').forEach(input => {
                    input.addEventListener('change', updateSummary);
                });
            }
        }

        // Fun√ß√µes globais para navega√ß√£o
        function showSection(sectionId) {
            document.querySelectorAll('.auth-section, .main-system').forEach(section => {
                section.classList.remove('active-section');
            });
            document.getElementById(sectionId).classList.add('active-section');
        }

        function showContentSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active-section');
            });
            document.getElementById(sectionId).classList.add('active-section');

            // Atualizar navega√ß√£o
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');

            // Atualizar conte√∫do espec√≠fico
            if (system.currentUser) {
                if (sectionId === 'agendamentos-section' && system.currentUser.role === 'client') {
                    system.loadUserAppointments();
                } else if (sectionId === 'admin-section' && system.currentUser.role === 'admin') {
                    system.loadAdminPanel();
                }
            }
        }

        function logout() {
            system.logout();
        }

        // Fun√ß√£o para atualizar resumo do formul√°rio
        function updateSummary() {
            const servicoSelect = document.getElementById('servico');
            const tecnicaSelect = document.getElementById('tecnica');
            const tipoUnhaSelect = document.getElementById('tipo-unha');
            const dataInput = document.getElementById('data');
            const horarioSelect = document.getElementById('horario');

            document.getElementById('servico-selecionado').textContent =
                servicoSelect.value ? servicoSelect.options[servicoSelect.selectedIndex].text.split(' - ')[0] : '-';

            document.getElementById('tecnica-selecionada').textContent =
                tecnicaSelect.value ? tecnicaSelect.options[tecnicaSelect.selectedIndex].text : '-';

            document.getElementById('tipo-unha-selecionado').textContent =
                tipoUnhaSelect.value ? tipoUnhaSelect.options[tipoUnhaSelect.selectedIndex].text : 'Natural';

            const dataHora = dataInput.value && horarioSelect.value ?
                `${formatDate(dataInput.value)} √†s ${horarioSelect.value}` : '-';
            document.getElementById('datahora-selecionada').textContent = dataHora;

            updateTotal();
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }

        function updateTotal() {
            const servicoSelect = document.getElementById('servico');
            let total = 0;

            if (servicoSelect.value) {
                const price = servicoSelect.options[servicoSelect.selectedIndex].dataset.price;
                total = parseInt(price);
            }

            document.getElementById('total-selecionado').textContent =
                `R$ ${total.toFixed(2).replace('.', ',')}`;
        }

        // Inicializar sistema
        const system = new NailStudioSystem();

        // Mostrar links de admin para administradores
        document.querySelectorAll('.admin-only').forEach(el => {
            if (system.currentUser && system.currentUser.role === 'admin') {
                el.style.display = 'block';
            }
        });
    </script>
</body>

</html>
    <!-- Tela de Login -->
    <section id="login-section" class="auth-section active-section">
        <div class="auth-container">
            <div class="auth-header">
                <h1>Bem-vindo ao NailStudio</h1>
                <p>Fa√ßa login para continuar</p>